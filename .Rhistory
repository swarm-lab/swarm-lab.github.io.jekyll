install.packages("svglite", repos="http://cran.us.r-project.org")
### ENVIRONMENT
if (!require(RefManageR)) {
install.packages("RefManageR", repos = "http://cran.us.r-project.org")
require(RefManageR)
}
if (!require(DescTools)) {
install.packages("DescTools", repos = "http://cran.us.r-project.org")
require(DescTools)
}
if (!require(stringr)) {
install.packages("stringr", repos = "http://cran.us.r-project.org")
require(stringr)
}
if (!require(lubridate)) {
install.packages("lubridate", repos = "http://cran.us.r-project.org")
require(lubridate)
}
BibOptions(check.entries = "warn",
sorting = "ydnt",
style = "markdown",
bib.style = "numeric",
max.names = Inf,
no.print.fields = c("url", "file", "keywords",
"issn", "abstract", "language", "pmid",
"copyright", "pmc"))
prepare_refs <- function(bib) {
void <- lapply(bib, function(ref) NoCite(ref))
refs <- capture.output(PrintBibliography(bib))
refs <- c("", refs)
refs <- SplitAt(refs,
which(nchar(refs) == 0))
sapply(
refs[2:length(refs)],
function(ref) {
ref <- paste0(ref, collapse = " ")
ref <- str_remove(ref, " <a(.*)a>")
ref <- str_remove(ref, "(?<=]])(.*?)\\)")
ref <- str_replace(ref, "\\\\textquotesingle", "'")
ref <- str_replace(ref, "\\\\textendash", "-")
ref <- str_replace(ref, "\\[\\[", "")
ref <- str_replace(ref, "\\]\\]", ".")
ref <- str_replace(ref, "\\\\\\\"\\\\i", "Ã¯")
ref <- str_replace(ref, "S. Garnier", "**S. Garnier**")
ref
})
}
### DATA
preprints <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Preprints.bib")
journal_papers <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Journal-Papers.bib")
conference_papers <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Conference-Papers.bib")
book_chapters <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Book-Chapters.bib")
books <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Books.bib")
invited_talks <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Invited-talks.bib")
conference_abstracts <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Conference-Abstracts.bib")
preprints <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Preprints.bib")
journal_papers <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Journal-Papers.bib")
conference_papers <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Conference-Papers.bib")
book_chapters <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Book-Chapters.bib")
books <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Books.bib")
invited_talks <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Invited-talks.bib")
conference_abstracts <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Conference-Abstracts.bib")
preprints <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Preprints.bib")
journal_papers <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Journal-Papers.bib")
conference_papers <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Conference-Papers.bib")
book_chapters <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Book-Chapters.bib")
books <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Books.bib")
invited_talks <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Invited-talks.bib")
conference_abstracts <- ReadBib("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Conference-Abstracts.bib")
### PREPRINTS REFERENCES
preprints_refs <- prepare_refs(preprints)
scholar_page <- readLines("publications/index.md")
warnings()
setwd("~/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Work/web/swarmlab/scripts")
setwd("/Users/simon/Library/CloudStorage/GoogleDrive-garnier@njit.edu/My Drive/Work/web/swarmlab")
### PREPRINTS REFERENCES
preprints_refs <- prepare_refs(preprints)
warnings()
### PREPRINTS REFERENCES
preprints_refs <- prepare_refs(preprints)
scholar_page <- readLines("publications/index.md")
start <- grep("#### Preprints under Review", scholar_page) - 1
end <- min(which(scholar_page == "---")[which(scholar_page == "---") > start])
scholar_page <- scholar_page[-(start + 1):-(end - 1)]
section <- paste0("#### Preprints under Review (Last updated ",
format(today(), "%b %d, %Y"), ")")
out <- c(scholar_page[1:start], "", section, "", preprints_refs, "",
scholar_page[(start + 1):length(scholar_page)])
out
### PREPRINTS REFERENCES
preprints_refs <- prepare_refs(preprints)
scholar_page <- readLines("publications/index.md")
start <- grep("#### Preprints under Review", scholar_page) - 1
end <- min(which(scholar_page == "---")[which(scholar_page == "---") > start])
scholar_page <- scholar_page[-(start + 1):-(end - 1)]
section <- paste0("#### Preprints under Review (Last updated ",
format(today(), "%b %d, %Y"), ")")
scholar_page
section <- paste0("#### Preprints under Review (Last updated ",
format(today(), "%b %d, %Y"), ")")
section
preprints_refs
out <- c(scholar_page[1:start], "", section, "", preprints_refs, "",
scholar_page[(start + 1):length(scholar_page)])
out
